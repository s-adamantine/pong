<html>
<center><canvas id = "gameCanvas" width="800" height="600"> </canvas></center>

<script>
var canvas; //the dimensions of our display area
var canvasContext; //underlying graphical information in which you can draw rectangles and shit
var centerX = centerY = 50;
var paddleY = 250;
var leftScore = rightScore = 0;
var offset = 15;
var	vH = 8;
var vY = 5;
var fps = 50;
var gameState = true;

	window.onload = function() { 	//makes sure that the entire script is loaded
		canvas = document.getElementById('gameCanvas');
		canvasContext = canvas.getContext('2d');
		keyPress();
		setInterval(function() {
			draw();
			bounceBall();
			drawBall(centerX, centerY);
			scoring();
			newRound();
			pauseGame();
		}, 1000/fps);
	};

	function scoring() {
		if (centerX > canvas.width) {
			leftScore += 1;
		} else if (centerY < 0) {
			rightScore += 1;
		}
	}

	function pauseGame() {
		var vHCopy = vH;
		var vYCopy = vY; //doesn't work bc it redos it per fps
		if (!gameState) {
			vH = vY = 0;
			break;
		} else {
			vH = vHCopy;
			vY = vYCopy;
		}
	}

	function keyPress() {
		document.addEventListener('keydown', function(event) {
	    	if(event.keyCode == 38) {
	        	movePaddle(-20);
	    	} else if(event.keyCode == 40) {
		        movePaddle(20);
		    } else if(event.keyCode == 32 ) {
				gameState ? gameState = false : gameState = true;
			}
		});
	}

	function movePaddle(vPaddle) {
		paddleY += vPaddle;
	}

	function draw() {
		drawCanvas();
		drawPaddles();
		drawNet();
	}

	function drawCanvas() {
		canvasContext.fillStyle = 'black';
		canvasContext.fillRect(0,0, canvas.width, canvas.height);
	}

	function drawPaddles() {
		canvasContext.fillStyle = 'white';
		canvasContext.fillRect(offset, paddleY, 5, 100);
		canvasContext.fillRect(canvas.width - offset, paddleY, 5, 100);
	}

	function drawNet() {
		canvasContext.fillStyle = 'white';
		var netX = canvas.width/2;
		var netY = 0;
		while (netY < canvas.height) {
			canvasContext.fillRect(netX, netY, 2, 10);
			netY += 20;
		}
	}

	function drawBall(centerX, centerY) {
		canvasContext.beginPath();
		canvasContext.fillStyle = 'white';
		canvasContext.arc(centerX, centerY, 5, 0, Math.PI * 2, true);
		canvasContext.fill();
	}

	function newRound() {
		// if the ball reaches the left side, go back to the middle
		if (centerX < 0 || centerX > canvas.width) {
			centerX = canvas.width/2;
			centerY = canvas.height/2;
		}
	}

	function bounceBall() {
		centerX = centerX + vH;
		centerY = centerY + vY;
		//bounce back on paddle hit
		if ((centerX > (canvas.width - offset) || centerX < (offset + 5)) &&
		 	(centerY > paddleY && centerY < paddleY + 100)) {
			vH = -vH;
		}
		//bounce back on hitting bottom of screen
		if (centerY > 600|| centerY < 0) {
			vY = -vY;
		}
	}
</script>

</html>
